<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Penny-fyt</title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Material Design links -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,400,500,700" type="text/css">

    <!-- Custom CSS -->
    <link href="css/penny.css" rel="stylesheet">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script src="https://www.gstatic.com/firebasejs/3.8.0/firebase.js"></script>
    <script>
      // Initialize Firebase
      var config = {
        apiKey: "AIzaSyDWON7t6-oxvb_U3Z8mZAqYZYT5YmNQlZA",
        authDomain: "penny-fyt.firebaseapp.com",
        databaseURL: "https://penny-fyt.firebaseio.com",
        projectId: "penny-fyt",
        storageBucket: "penny-fyt.appspot.com",
        messagingSenderId: "472416068627"
      };
      firebase.initializeApp(config);
    </script>

    <!-- AngularJS -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular.min.js"></script>

    <!-- AngularFire -->
    <script src="https://cdn.firebase.com/libs/angularfire/2.0.2/angularfire.min.js"></script>
    <!-- JQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!-- scripts -->
    <script type="text/javascript" src="js/penny.js"></script>

</head>

<!-- The #page-top ID is part of the scrolling feature - the data-spy and data-target are part of the built-in Bootstrap scrollspy function -->

<body id="page-top" ng-app="myApp" ng-controller="myCtrl" ng-init="setUpLoginDialog();">

    <!-- Navigation -->
    <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
        <header class="mdl-layout__header">
            <div class="mdl-layout__header-row">
            <!-- Title -->
            <span class="mdl-layout-title" ng-click="feedButton();" style="cursor: pointer;"><img src="assets/pennylogo-no-bg.png" style="width: 2em;"/>enny-fyt</span>
            <!-- Add spacer, to align navigation to the right -->
            <div class="mdl-layout-spacer"></div>
            <!-- Navigation. We hide it in small screens. -->
            <!--mdl-layout--large-screen-only-->
            <nav class="mdl-navigation">
                <!--<a class="mdl-navigation__link" ng-show="loggedIn && !feed" ng-click="feed = true; about = false; discover = false; loadfeed(); npoSignup = false;">Home</a>-->
                <a class="mdl-navigation__link" ng-show="!about" ng-click="about = true; showSignup = false; feed = false; discover = false; npoSignup = false;">About</a>
                <a class="mdl-navigation__link" ng-show="!discover" ng-click="discover = true; about = false; feed = false; loadNpos(); npoSignup = false; showSignup = false;">Discover</a>
                <a class="mdl-navigation__link" ng-show="!loggedIn && !showSignup" ng-click="showSignup = true; about = false; npoSignup = false; discover = false;">Sign Up</a>
                <a class="mdl-navigation__link" id="show-dialog" ng-show="!loggedIn">Login</a>
                <a class="mdl-navigation__link" ng-show="loggedIn" ng-click="logOut(); npoSignup = false;">Log Out</a>
            </nav>
            </div>
        </header>
        <!--<div class="mdl-layout__drawer">
            <span class="mdl-layout-title">Title</span>
            <nav class="mdl-navigation">
            <a class="mdl-navigation__link" href="">Link</a>
            <a class="mdl-navigation__link" href="">Link</a>
            <a class="mdl-navigation__link" href="">Link</a>
            <a class="mdl-navigation__link" href="">Link</a>
            </nav>
        </div>-->
        <main class="mdl-layout__content">
            <div class="page-content">

                <!-- content goes here --> 
                <!-- About Section -->
                <section id="about" class="about-section" ng-show="about">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-12">
                                <h1>About Us</h1>
                                <div class="video-container">
                                    <iframe width="560" height="315" src="https://www.youtube.com/embed/5mJX6zNIvrw" frameborder="0" allowfullscreen></iframe>
                                </div>
                                <p>Penny-fyt is a social media platform that makes donating to charity easy and quick. Non-profit organizations and charities post content that users can like, comment, and share to contribute a penny (or more!) towards that charity. We hope to remove the confusion surrounding donation processes that many would-be contributors face, while also creating an online community where avid activists and casual users can come together and contribute to causes that they are passionate about.</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Sign up section -->
                <section id="signup" class="signup-section" ng-show="!loggedIn && showSignup">
                    <div class="container">
                        <div class="row">
                            <div class="col-md-6 signuplinks">
                                <h1>User Sign Up</h1>
                                <p>(If you wish to register an NPO please <a ng-click="npoSignup = true; showSignup = false;">click here</a>.)</p>
                                <div class="form-group">
                                    <form ng-submit="signup()" id="signupForm">
                                         <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                                            <input class="mdl-textfield__input" type="text" id="fName" ng-model="fName">
                                            <label class="mdl-textfield__label" for="fName">First Name</label>
                                        </div>
                                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label" >
                                            <input class="mdl-textfield__input" type="text" id="lName" ng-model="lName">
                                            <label class="mdl-textfield__label" for="lName">Last Name</label>
                                        </div>
                                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                                            <input class="mdl-textfield__input" type="email" id="email" ng-model="email">
                                            <label class="mdl-textfield__label" for="email">Email</label>
                                        </div>
                                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                                            <input class="mdl-textfield__input" type="password" id="pwd" ng-model="pwd" ng-keyup="checkPwd()">
                                            <label class="mdl-textfield__label" for="pwd">Password</label>
                                        </div>
                                        <p id="pwdMessage"></p>
                                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                                            <input class="mdl-textfield__input" type="password" id="pwd2" ng-model="pwd2" ng-keyup="checkPwdMatch()">
                                            <label class="mdl-textfield__label" for="pwd2">Confirm Password</label>
                                        </div>
                                        <p id="pwd2Message"></p>
                                        <p id="signUpErrorMsg"></p>
                                        <button type="submit" class="mdl-button">Create Account</button>
                                    </form>
                                </div>
                            </div>
                            
                        </div>
                    </div>
                </section>

                <!-- NPO Sign up section -->
                <section id="npoSignup" class="signup-section" ng-show="!loggedIn && npoSignup">
                    <div class="container">
                        <div class="row">
                            <div class="col-md-6 signuplinks">
                                <h1>NPO Sign Up</h1>
                                <div class="form-group">
                                    <form ng-submit="npoAdd()" id="npoSignupForm">
                                         <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                                            <input class="mdl-textfield__input" type="text" id="fName" ng-model="npoName">
                                            <label class="mdl-textfield__label" for="fName">NPO Name</label>
                                        </div>
                                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                                            <input class="mdl-textfield__input" type="email" id="email" ng-model="npoEmail">
                                            <label class="mdl-textfield__label" for="email">Email</label>
                                        </div>
                                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                                            <input class="mdl-textfield__input" type="password" id="pwd" ng-model="npoPwd">
                                            <label class="mdl-textfield__label" for="pwd">Password</label>
                                        </div>
                                        <p id="pwdMessage"></p>
                                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                                            <input class="mdl-textfield__input" type="password" id="pwd2" ng-model="npoPwd2">
                                            <label class="mdl-textfield__label" for="pwd2">Confirm Password</label>
                                        </div>
                                        <p id="pwd2Message"></p>
                                        <p id="signUpErrorMsg"></p>
                                        <p id="pwd2Message"></p>
                                        <p id="signUpErrorMsg"></p>
                                        <button type="submit" class="mdl-button">Create Account</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>


                <!-- Discover Section -->
                <section ng-show="discover">
                    <div class="container">
                        <div id="discover">
                            <h1>Discover</h1>
                            <div id="card-feed">
                                <div class="demo-card-square mdl-card mdl-shadow--2dp" ng-repeat="npo in npos">
                                    <div class="mdl-card__title mdl-card--expand">
                                        <h2 class="mdl-card__title-text">{{npo.name}}</h2>
                                    </div>
                                    <div class="mdl-card__supporting-text">
                                        Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                                        Aenan convallis.
                                    </div>
                                    <div class="mdl-card__actions mdl-card--border">
                                        <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" ng-click="follow(npo);">
                                            Follow
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Feed Section -->
                <section id="createPost" ng-show="loggedIn && feed">
                    <div class="container">
                        <div class="row">
                            <div class="col-md-6 signuplinks">
                                <form ng-submit="createPost()" id="createPostForm">
                                    <div class="mdl-textfield mdl-js-textfield" style="width: 100%;">
                                        <textarea class="mdl-textfield__input" type="text" rows= "3" id="sample5" ng-model="postText"></textarea>
                                        <label class="mdl-textfield__label" for="sample5">Write a post...</label>
                                    </div>
                                    <div class="mdl-textfield mdl-js-textfield getmdl-select getmdl-select__fullwidth">
                                        <input class="mdl-textfield__input" type="text" id="chooseNPO" value="Tag an NPO" readonly tabIndex="-1">
                                        <ul for="chooseNPO" class="mdl-menu mdl-menu--bottom-left mdl-js-menu">
                                            <li class="mdl-menu__item" ng-repeat="npo in npos" data-val="{{npo.$id}}" ng-click="choseNpo(npo);">{{npo.name}}</li>
                                        </ul>
                                    </div>
                                    
                                    <button type="submit" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect postRight">
                                        Post
                                    </button>
                                    <i class="material-icons postRight" style="margin-right: 1em; cursor: pointer;" ng-click="addPhoto();">add_a_photo</i>
                                    <div id="photoDiv" class="none">
                                        
                                        <div class="file_input_div">
                                            
                                            <div class="file_input">
                                                <label class="image_input_button mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-js-ripple-effect mdl-button--colored">
                                                    <i class="material-icons">file_upload</i>
                                                    <input id="file_input_file" onchange="angular.element(this).scope().previewFile()" class="none" type="file" />
                                                </label>
                                                <div class="item">
                                                    <span class="notify-badge" ng-show="fileName" ng-click="deleteImage();"><i class="fa fa-times-circle" aria-hidden="true"></i></span>
                                                    <img src="assets/placeholder-image.png" id="preview" height="100px" width="100px" alt="Image preview..." style="margin-left: 1em;">
                                                </div>
                                            </div>
                                            
                                            <!--<div id="file_input_text_div" class="mdl-textfield mdl-js-textfield textfield-demo">
                                                <input class="file_input_text mdl-textfield__input" type="text" disabled readonly id="file_input_text" style="color: black;"/>
                                                
                                                <label class="mdl-textfield__label" for="file_input_text"></label>
                                                ng-show="fileName"
                                            </div>-->
                                            
                                        </div>
                                        
                                    </div>
                                    
                                </form>
                            </div>
                        </div>
                    </div>
                    
                    <div id="post-feed"> 
                        <div class="demo-card-wide mdl-card mdl-shadow--2dp" ng-repeat="post in posts" >
                            <div class="mdl-card__title" style="height: {{post.height}};"> 
                                <h2 class="mdl-card__title-text">{{post.text}}</h2>
                            </div>
                            <div class="mdl-card__supporting-text">
                                <span class="postAuthor">{{post.userFName}} {{post.userLName}}</span> in support of <span class="postAuthor">{{post.npo}}</span>
                            </div>
                            <div class="mdl-card__actions mdl-card--border">
                                <a ng-click="like(post);" class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect">
                                    Like
                                </a>
                                <a ng-click="addComment(post);" class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect">
                                    Comment
                                </a>
                            </div>
                            <div class="mdl-card__menu">
                                <div id="likesFor{{post.$id}}">
                                    <span title="Likes">{{post.likes}} <img src="assets/like-icon.png" style="width: 1em;"/>&nbsp;</span> 
                                    <span title="Comments" ng-click="addComment(post);" style="cursor: pointer;">{{post.commentCount}} <img src="assets/comment-icon.png" style="width: 1em;"/>&nbsp;</span> 
                                    <span title="Amount Raised">{{post.raised}}  <img src="assets/cent-icon.png" style="width: 1em;"/></span>
                                </div>
                            </div>
                            
                            <div id="commentsFor{{post.$id}}" class="commentDisplay"></div>
                            </div>
                        </div>
                    </div>
                </section>

                <!--Reload Credits-->
                <!--<section id="reload" ng-show="loggedIn">
                    <button ng-click="reloadCredits();" type="submit" class="mdl-button">Reload Credits</button>
                </section>-->

               <!--Login Dialog-->
                <dialog class="mdl-dialog" id="loginDialog">
                    <h4 class="mdl-dialog__title">Login</h4>
                    <form ng-submit="login()" id="loginForm">
                        <div class="mdl-dialog__content">
                            <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                                <input class="mdl-textfield__input" type="email" id="loginEmail" ng-model="loginEmail">
                                <label class="mdl-textfield__label" for="loginEmail">Email</label>
                            </div>
                            <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                                <input class="mdl-textfield__input" type="password" id="loginPwd" ng-model="loginPwd">
                                <label class="mdl-textfield__label" for="loginPwd">Password</label>
                            </div>
                        </div>
                        <div id="loginErrorMsg"></div>
                        <div class="mdl-dialog__actions">
                            <button type="submit" class="mdl-button">Submit</button>
                            <button type="button" class="mdl-button close">Cancel</button>
                        </div>
                    </form>
                </dialog>

<!--main section closing tags-->
            </div>
        </main>
    </div>   

    <!-- jQuery -->
    <script src="js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>

    <!-- Scrolling Nav JavaScript -->
    <script src="js/jquery.easing.min.js"></script>
    <script src="js/scrolling-nav.js"></script>

</body>

</html>
